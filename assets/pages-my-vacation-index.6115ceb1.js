import{_ as e}from"./uni-segmented-control.5f0241e9.js";import{z as t,A as a,_ as l,r as s,f as i,o,c as n,w as r,d as c,t as u,m as d,b as m,n as f,B as h,q as p,F as y,u as _,i as g,j as x,S as b,s as v,C as D,D as C,e as k,x as S}from"./index-9648761c.js";import{W as V,_ as w,a as F,c as T,b as I,d as z,e as R,f as K}from"./wx2.c7c69f5a.js";import{_ as q}from"./uni-icons.c22b4d64.js";import{_ as $}from"./uni.b665e1f1.js";import{_ as j}from"./u-empty.e948b744.js";import{D as N}from"./D_vacation.0b7b9c46.js";const O=l({name:"uni-data-select",mixins:[V.mixinDatacom||{}],props:{localdata:{type:Array,default:()=>[]},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},label:{type:String,default:""},placeholder:{type:String,default:"请选择"},emptyTips:{type:String,default:"无选项"},clear:{type:Boolean,default:!0},defItem:{type:Number,default:0},disabled:{type:Boolean,default:!1},format:{type:String,default:""}},data:()=>({showSelector:!1,current:"",mixinDatacomResData:[],apps:[],channels:[],cacheKey:"uni-data-select-lastSelectedValue"}),created(){this.debounceGet=this.debounce((()=>{this.query()}),300),this.collection&&!this.localdata.length&&this.debounceGet()},computed:{typePlaceholder(){const e=this.placeholder,t={"opendb-stat-app-versions":"版本","opendb-app-channels":"渠道","opendb-app-list":"应用"}[this.collection];return t?e+t:e},valueCom(){return this.modelValue},textShow(){let e=this.current;return e.length>10?e.slice(0,25)+"...":e}},watch:{localdata:{immediate:!0,handler(e,t){Array.isArray(e)&&t!==e&&(this.mixinDatacomResData=e)}},valueCom(e,t){this.initDefVal()},mixinDatacomResData:{immediate:!0,handler(e){e.length&&this.initDefVal()}}},methods:{debounce(e,t=100){let a=null;return function(...l){a&&clearTimeout(a),a=setTimeout((()=>{e.apply(this,l)}),t)}},query(){this.mixinDatacomEasyGet()},onMixinDatacomPropsChange(){this.collection&&this.debounceGet()},initDefVal(){let e="";if(!this.valueCom&&0!==this.valueCom||this.isDisabled(this.valueCom)){let t;if(this.collection&&(t=this.getCache()),t||0===t)e=t;else{let t="";this.defItem>0&&this.defItem<=this.mixinDatacomResData.length&&(t=this.mixinDatacomResData[this.defItem-1].value),e=t}(e||0===e)&&this.emit(e)}else e=this.valueCom;const t=this.mixinDatacomResData.find((t=>t.value===e));this.current=t?this.formatItemName(t):""},isDisabled(e){let t=!1;return this.mixinDatacomResData.forEach((a=>{a.value===e&&(t=a.disable)})),t},clearVal(){this.emit(""),this.collection&&this.removeCache()},change(e){e.disable||(this.showSelector=!1,this.current=this.formatItemName(e),this.emit(e.value))},emit(e){this.$emit("input",e),this.$emit("update:modelValue",e),this.$emit("change",e),this.collection&&this.setCache(e)},toggleSelector(){this.disabled||(this.showSelector=!this.showSelector)},formatItemName(e){let{text:t,value:a,channel_code:l}=e;if(l=l?`(${l})`:"",this.format){let t="";t=this.format;for(let a in e)t=t.replace(new RegExp(`{${a}}`,"g"),e[a]);return t}return this.collection.indexOf("app-list")>0?`${t}(${a})`:t||`未命名${l}`},getLoadData(){return this.mixinDatacomResData},getCurrentCacheKey(){return this.collection},getCache(e=this.getCurrentCacheKey()){return(t(this.cacheKey)||{})[e]},setCache(e,l=this.getCurrentCacheKey()){let s=t(this.cacheKey)||{};s[l]=e,a(this.cacheKey,s)},removeCache(e=this.getCurrentCacheKey()){let l=t(this.cacheKey)||{};delete l[e],a(this.cacheKey,l)}}},[["render",function(e,t,a,l,v,D){const C=g,k=s(i("uni-icons"),q),S=x,V=b;return o(),n(C,{class:"uni-stat__select"},{default:r((()=>[a.label?(o(),n(C,{key:0,class:"uni-label-text"},{default:r((()=>[c(u(a.label+"："),1)])),_:1})):d("",!0),m(C,{class:f(["uni-stat-box",{"uni-stat__actived":v.current}])},{default:r((()=>[m(C,{class:f(["uni-select",{"uni-select--disabled":a.disabled}])},{default:r((()=>[m(C,{class:"uni-select__input-box",onClick:D.toggleSelector},{default:r((()=>[v.current?(o(),n(C,{key:0,class:"uni-select__input-text"},{default:r((()=>[c(u(D.textShow),1)])),_:1})):(o(),n(C,{key:1,class:"uni-select__input-text uni-select__input-placeholder"},{default:r((()=>[c(u(D.typePlaceholder),1)])),_:1})),v.current&&a.clear&&!a.disabled?(o(),n(C,{key:2,onClick:h(D.clearVal,["stop"])},{default:r((()=>[m(k,{type:"clear",color:"#c0c4cc",size:"24"})])),_:1},8,["onClick"])):(o(),n(C,{key:3},{default:r((()=>[m(k,{type:v.showSelector?"top":"bottom",size:"14",color:"#999"},null,8,["type"])])),_:1}))])),_:1},8,["onClick"]),v.showSelector?(o(),n(C,{key:0,class:"uni-select--mask",onClick:D.toggleSelector},null,8,["onClick"])):d("",!0),v.showSelector?(o(),n(C,{key:1,class:"uni-select__selector"},{default:r((()=>[m(C,{class:"uni-popper__arrow"}),m(V,{"scroll-y":"true",class:"uni-select__selector-scroll"},{default:r((()=>[0===v.mixinDatacomResData.length?(o(),n(C,{key:0,class:"uni-select__selector-empty"},{default:r((()=>[m(S,null,{default:r((()=>[c(u(a.emptyTips),1)])),_:1})])),_:1})):(o(!0),p(y,{key:1},_(v.mixinDatacomResData,((e,t)=>(o(),n(C,{class:"uni-select__selector-item",key:t,onClick:t=>D.change(e)},{default:r((()=>[m(S,{class:f({"uni-select__selector__disabled":e.disable})},{default:r((()=>[c(u(D.formatItemName(e)),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):d("",!0)])),_:1},8,["class"])])),_:1},8,["class"])])),_:1})}],["__scopeId","data-v-822c1227"]]);const P=l({components:{addForm:l({components:{},data:()=>({range:[{value:0,text:"年假"},{value:1,text:"事假"},{value:2,text:"病假"}],valiFormData:{typesOf:"",startTime:"",endTime:"",introduction:"",fileValue:""},rules:{typesOf:{rules:[{required:!0,errorMessage:"请假类型不能为空"}]},startTime:{rules:[{required:!0,errorMessage:"开始时间不能为空"}]},endTime:{rules:[{required:!0,errorMessage:"结束时间不能为空"}]}}}),computed:{chaTime(){return this.valiFormData.startTime&&this.valiFormData.endTime?((new Date(this.valiFormData.endTime)-new Date(this.valiFormData.startTime))/1e3/60/60).toFixed(1):null}},methods:{setFile(e){console.log(e),this.valiFormData.fileValue=e.tempFilePaths[0]},submit(e){this.$refs.valiForm.validate().then((e=>{console.log("success",e),v({title:"校验通过"})})).catch((e=>{console.log("err",e)}))}}},[["render",function(e,t,a,l,d,f){const h=g,x=s(i("uni-data-select"),O),b=s(i("uni-forms-item"),T),v=s(i("uni-datetime-picker"),I),S=s(i("uni-easyinput"),z),V=s(i("uni-file-picker"),R),q=s(i("uni-forms"),K),$=k;return o(),n(h,{style:{width:"100%"}},{default:r((()=>[m(h,{style:{"font-size":"0.8rem",color:"#a1a1a1","padding-bottom":"10px"}},{default:r((()=>[c(" 年假剩余 128.5小时 ")])),_:1}),m(h,{class:"cardStyle",style:{"padding-bottom":"1px"}},{default:r((()=>[m(h,{class:"titleStyle",style:{"font-size":"14px"}},{default:r((()=>[c(" 申请信息 ")])),_:1}),m(q,{ref:"valiForm",rules:d.rules,modelValue:d.valiFormData,"label-position":"top","err-show-type":"toast"},{default:r((()=>[m(b,{label:"请假类型",required:"",name:"typesOf"},{default:r((()=>[m(x,{modelValue:d.valiFormData.typesOf,"onUpdate:modelValue":t[0]||(t[0]=e=>d.valiFormData.typesOf=e),localdata:d.range,placeholder:"请选择请假类型"},null,8,["modelValue","localdata"])])),_:1}),m(b,{label:"开始时间",required:"",name:"startTime"},{default:r((()=>[m(v,{type:"datetime","return-type":"string",modelValue:d.valiFormData.startTime,"onUpdate:modelValue":t[1]||(t[1]=e=>d.valiFormData.startTime=e)},null,8,["modelValue"])])),_:1}),m(b,{label:"结束时间",required:"",name:"endTime"},{default:r((()=>[m(v,{type:"datetime","return-type":"string",modelValue:d.valiFormData.endTime,"onUpdate:modelValue":t[2]||(t[2]=e=>d.valiFormData.endTime=e)},null,8,["modelValue"])])),_:1}),D(m(h,{style:{"font-size":"0.8rem",color:"#a1a1a1","padding-bottom":"20px"}},{default:r((()=>[c(" 共计"+u(f.chaTime)+"小时 ",1)])),_:1},512),[[C,f.chaTime]]),m(b,{label:"请假事由",name:"introduction"},{default:r((()=>[m(S,{type:"textarea",modelValue:d.valiFormData.introduction,"onUpdate:modelValue":t[3]||(t[3]=e=>d.valiFormData.introduction=e),placeholder:"请输入请假事由"},null,8,["modelValue"])])),_:1}),m(b,{label:"图片",name:"fileValue"},{default:r((()=>[m(h,{style:{width:"66%"}},{default:r((()=>[m(V,{limit:"1","file-mediatype":"image","auto-upload":!1,onSelect:f.setFile,onDelete:t[4]||(t[4]=e=>d.valiFormData.fileValue="")},null,8,["onSelect"])])),_:1})])),_:1})])),_:1},8,["rules","modelValue"])])),_:1}),m(h,{class:"cardStyle"},{default:r((()=>[m(h,{class:"titleStyle",style:{"font-size":"14px"}},{default:r((()=>[c(" 流程 ")])),_:1}),m(h,{style:{padding:"10px 0",position:"relative"}},{default:r((()=>[m(h,{class:"flexcsb"},{default:r((()=>[m(h,{class:"round"}),m(h,null,{default:r((()=>[m(h,{style:{"font-size":"0.9rem"}},{default:r((()=>[c("审批人")])),_:1}),m(h,{style:{"font-size":"0.7rem","margin-top":"3px"}},{default:r((()=>[c("3人审批")])),_:1})])),_:1}),m(h,{class:"profilePicture"},{default:r((()=>[(o(),p(y,null,_(3,(t=>m(h,{key:e.item,style:{"margin-left":"5px"}},{default:r((()=>[m($,{src:w,mode:""}),m(h,{style:{"font-size":"0.7rem",color:"#5b5b5b"}},{default:r((()=>[c(" 李娜"+u(t),1)])),_:2},1024)])),_:2},1024))),64))])),_:1}),m(h,{class:"icon"},{default:r((()=>[c("+")])),_:1})])),_:1}),m(h,{class:"flexcsb",style:{"margin-top":"40px"}},{default:r((()=>[m(h,{class:"round"}),m(h,null,{default:r((()=>[m(h,{style:{"font-size":"0.9rem"}},{default:r((()=>[c("抄送人")])),_:1}),m(h,{style:{"font-size":"0.7rem","margin-top":"3px"}},{default:r((()=>[c("3人抄送")])),_:1})])),_:1}),m(h,{class:"profilePicture"},{default:r((()=>[(o(),p(y,null,_(3,(t=>m(h,{key:e.item,style:{"margin-left":"6px"}},{default:r((()=>[m($,{src:F,mode:""}),m(h,{style:{"font-size":"0.7rem",color:"#5b5b5b"}},{default:r((()=>[c(" 张杰"+u(t),1)])),_:2},1024)])),_:2},1024))),64))])),_:1}),m(h,{class:"icon"},{default:r((()=>[c("+")])),_:1})])),_:1}),m(h,{class:"line"})])),_:1})])),_:1}),m(h,{style:{width:"100%",height:"90px"}}),m(h,{class:"flexcc button"},{default:r((()=>[m(h,{onClick:f.submit},{default:r((()=>[c(" 提交 ")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-b6b30942"]]),viewList:l({components:{Dvacation:N},data:()=>({}),methods:{search(e){console.log(e.value)}}},[["render",function(e,t,a,l,c,u){const d=s(i("uni-search-bar"),$),f=g,h=S("Dvacation"),x=s(i("u-empty"),j);return o(),n(f,{class:"page"},{default:r((()=>[m(f,{style:{"background-color":"#fff"}},{default:r((()=>[m(d,{radius:"5",placeholder:"搜索",clearButton:"auto",cancelButton:"none",onConfirm:u.search},null,8,["onConfirm"])])),_:1}),m(f,{class:"pageStyle",style:{padding:"4px 10px",flex:"1","overflow-y":"scroll"}},{default:r((()=>[(o(),p(y,null,_(10,((e,t)=>m(f,{key:t},{default:r((()=>[m(h,{id:t},null,8,["id"])])),_:2},1024))),64)),(o(),n(f,{key:0},{default:r((()=>[m(x,{mode:"list",text:"暂无记录"})])),_:1}))])),_:1})])),_:1})}],["__scopeId","data-v-deef0965"]])},data:()=>({items:["发起提交","查看数据"],current:0}),methods:{onClickItem(e){this.current!==e.currentIndex&&(this.current=e.currentIndex)}}},[["render",function(t,a,l,c,u,d){const f=s(i("uni-segmented-control"),e),h=g,p=S("addForm"),y=S("viewList");return o(),n(h,{style:{display:"flex","flex-direction":"column",height:"100vh"}},{default:r((()=>[m(h,{style:{"background-color":"#fff","padding-bottom":"5px"}},{default:r((()=>[m(f,{current:u.current,values:u.items,"style-type":"text","active-color":"#0e92fd",onClickItem:d.onClickItem},null,8,["current","values","onClickItem"])])),_:1}),m(h,{style:{flex:"1","overflow-y":"scroll",width:"100%"}},{default:r((()=>[0===u.current?(o(),n(h,{key:0,class:"pageStyle"},{default:r((()=>[m(p)])),_:1})):(o(),n(y,{key:1,style:{flex:"1"}}))])),_:1})])),_:1})}]]);export{P as default};
